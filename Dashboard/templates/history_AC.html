<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>L·ªãch s·ª≠ l∆∞∆°ng nh√¢n vi√™n - H·ªá th·ªëng Qu·∫£n l√Ω L∆∞∆°ng</title>
    <link rel="stylesheet" href="../static/history_AC.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-header">
          <h3 class="sidebar-title">Payroll Manager</h3>
          <p class="sidebar-subtitle">H·ªá th·ªëng Qu·∫£n l√Ω L∆∞∆°ng</p>
        </div>
        <div class="sidebar-menu">
          <a href="{{ url_for('home_AC') }}" ><i>üè†</i> Home </a>
          <a href="{{ url_for('payroll') }}"><i>üí∞</i> B·∫£ng l∆∞∆°ng nh√¢n vi√™n </a>
          <a href="{{ url_for('department_report') }}"
            ><i>üìë</i> B√°o c√°o theo ph√≤ng ban</a
          >
          <a href="{{ url_for('history_payroll') }}" class="active"
            ><i>üìú</i> L·ªãch s·ª≠ l∆∞∆°ng nh√¢n vi√™n</a
          >
          <a href="{{ url_for('get_notifications') }}"
            ><i>üîî</i> Th√¥ng b√°o b·∫£ng l∆∞∆°ng</a
          >
          <a href="{{ url_for('attendance_AC') }}"><i>üïí</i> Ch·∫•m c√¥ng </a>
          <a href="{{ url_for('logout') }}"><i>üö™</i> ƒêƒÉng xu·∫•t</a>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="header">
          <h2>H·ªá th·ªëng Qu·∫£n l√Ω L∆∞∆°ng</h2>
          <div class="user-info">
            <img
              src="https://ui-avatars.com/api/?name=Nguyen+Van+A&size=40&background=random"
              alt="User avatar"
            />
            <span>Nguy·ªÖn VƒÉn A | Qu·∫£n l√Ω L∆∞∆°ng</span>
          </div>
        </div>
        <div class="panel" id="employee-history">
        <div class="panel-body">
          <div class="filter-container">
            <table>
              <thead>
                <tr>
                  <th>Th·ªùi gian</th>
                  <th>L∆∞∆°ng c∆° b·∫£n</th>
                  <th>Th∆∞·ªüng</th>
                  <th>Kh·∫•u tr·ª´</th>
                  <th>T·ªïng l∆∞∆°ng</th>
                  <th>Ghi ch√∫</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Th√°ng 3/2025</td>
                  <td>15,000,000 ƒë</td>
                  <td>2,000,000 ƒë</td>
                  <td>1,500,000 ƒë</td>
                  <td>15,500,000 ƒë</td>
                  <td>Th∆∞·ªüng d·ª± √°n ABC</td>
                </tr>
                <tr>
                  <td>Th√°ng 2/2025</td>
                  <td>15,000,000 ƒë</td>
                  <td>1,500,000 ƒë</td>
                  <td>1,500,000 ƒë</td>
                  <td>15,000,000 ƒë</td>
                  <td>-</td>
                </tr>
                <tr>
                  <td>Th√°ng 1/2025</td>
                  <td>15,000,000 ƒë</td>
                  <td>1,200,000 ƒë</td>
                  <td>1,500,000 ƒë</td>
                  <td>14,700,000 ƒë</td>
                  <td>-</td>
                </tr>
                <tr>
                  <td>Th√°ng 12/2024</td>
                  <td>15,000,000 ƒë</td>
                  <td>3,000,000 ƒë</td>
                  <td>1,500,000 ƒë</td>
                  <td>16,500,000 ƒë</td>
                  <td>Th∆∞·ªüng cu·ªëi nƒÉm</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>


        <!-- UC16: L·ªãch s·ª≠ l∆∞∆°ng c·ªßa nh√¢n vi√™n -->
        <div class="panel" id="employee-history">
          <div class="panel-header">
            <h3>L·ªãch s·ª≠ l∆∞∆°ng nh√¢n vi√™n</h3>
          </div>
          <div class="panel-body">
            <div class="filter-container">
              <div class="filter-container">
                <label for="month-filter">Ch·ªçn th√°ng:</label>
                <select id="month-filter">
                  <option value="">T·∫•t c·∫£</option>
                  {% for i in range(1, 13) %}
                  <option value="{{ i }}">Th√°ng {{ i }}</option>
                  {% endfor %}
                </select>
                
                {% if selected_month %}
                  <button class="btn" id="filter-button">B·ªè L·ªçc</button>
                  <p><h2>üìÖ ƒêang xem b·∫£ng l∆∞∆°ng c·ªßa <strong>th√°ng {{ selected_month }}</strong></h2></p>
                {% else %}
                    <p><h2>üìÖ ƒêang xem <strong>t·∫•t c·∫£ c√°c th√°ng</strong></h2></p>
                {% endif %}

              </div>
              
              <table>
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>T√™n nh√¢n vi√™n</th>
                    <th>Ph√≤ng ban</th>
                    <th>L∆∞∆°ng c∆° b·∫£n</th>
                    <th>Th∆∞·ªüng</th>
                    <th>Kh·∫•u tr·ª´</th>
                    <th>T·ªïng l∆∞∆°ng</th>
                  </tr>
                </thead>
                <tbody>
                  {% for employee in payroll_data %}
                    {% if not selected_month or employee.month == selected_month %}
                      <tr>
                        <td>{{ employee.id }}</td>
                        <td>{{ employee.name }}</td>
                        <td>{{ employee.department }}</td>
                        <td>{{ "{:,.0f}".format(employee.base_salary) }} ƒë</td>
                        <td>{{ "{:,.0f}".format(employee.bonus) }} ƒë</td>
                        <td>{{ "{:,.0f}".format(employee.deduction) }} ƒë</td>
                        <td>{{ "{:,.0f}".format(employee.total_salary) }} ƒë</td>
                      </tr>
                    {% endif %} 
                  {% endfor %}
                </tbody>
              </table>
            </div>
      
            <script>
              document.getElementById("month-filter").addEventListener("change", function() {
                  const selectedMonth = this.value;
                  let params = new URLSearchParams();
                  if (selectedMonth) params.append("month", selectedMonth);
                  window.location.href = "/history_payroll" + (params.toString() ? "?" + params.toString() : "");
              });
      
              document.getElementById("filter-button").addEventListener("click", function() {
                  const selectedMonth = document.getElementById("month-filter").value;
                  let params = new URLSearchParams();
                  if (selectedMonth) params.append("month", selectedMonth);
                  window.location.href = "/history_payroll" + (params.toString() ? "?" + params.toString() : "");
              });
            </script>
          </div>
  </body>
</html>
      